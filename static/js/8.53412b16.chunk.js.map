{"version":3,"sources":["components/common/AddMessageForm/AddMessageForm.js","components/common/AddMessageForm/AddMessageForm.module.css","components/Dialogs/Dialogs.module.css","components/Dialogs/Dialog/Dialog.module.css","components/Dialogs/Message/Message.module.css","components/Dialogs/Dialog/Dialog.js","components/Dialogs/Message/Message.js","components/Dialogs/Dialogs.js","components/Dialogs/DialogsContainer.js","hoc/WithAuthRedirect.js"],"names":["AddMessageForm","error","onSubmit","initialValues","message","values","setSubmitting","isSubmitting","errors","touched","isValid","dirty","className","style","form","title","as","name","id","placeholder","input","fullName","input_error","component","type","btn","btn_disabled","disabled","server_errorContainer","server_error","module","exports","Dialog","dialog","to","link","activeClassName","active","Message","text","message_box","avatar","src","alt","Dialogs","dialogsPage","onSendMessage","dialogs","dialogs_list","map","d","messages","m","compose","connect","state","dispatch","sendMessageActionCreator","WithAuthRedirect","mapStateToPropsForRedirect","isAuth","auth","Component","RedirectComponent","this","props","React"],"mappings":"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","file":"static/js/8.53412b16.chunk.js","sourcesContent":["import { Field, Form, Formik, ErrorMessage } from 'formik';\r\nimport style from './AddMessageForm.module.css';\r\n\r\n\r\nfunction AddMessageForm({error, onSubmit}) {\r\n  const submit = (values, { setSubmitting }) => {\r\n    onSubmit(values);\r\n  }\r\n  \r\n  return (\r\n    <Formik\r\n      initialValues={{ message: \"\" }}\r\n      onSubmit={submit}\r\n    >\r\n      {({ isSubmitting, errors, touched, isValid, dirty }) => (\r\n        <Form className={style.form}>\r\n          <h2 className={style.title}>Create post</h2>\r\n          <Field  as=\"textarea\" name=\"message\" id=\"message\" placeholder='Enter your post'\r\n          className={`\r\n            ${style.input}\r\n            ${errors.fullName && touched.fullName ? style.input_error : null}`}\r\n          />\r\n          <ErrorMessage name=\"message\" component=\"span\" className={style.error} />\r\n          <button type=\"submit\"\r\n            // disabled={isSubmitting}\r\n            className={`${style.btn} ${!(dirty && isValid) ? style.btn_disabled : \"\"}`}\r\n            disabled={!(dirty && isValid)}\r\n          >\r\n              Publish\r\n          </button>\r\n          {error ? (\r\n                <div className={style.server_errorContainer}>\r\n                  <p className={style.server_error}>{`Something wrong!`}</p>\r\n                  <p className={style.server_error}>{error}</p>\r\n                </div>\r\n            ) : null}\r\n        </Form>\r\n      )}\r\n    </Formik>\r\n  )\r\n}\r\n\r\nexport default AddMessageForm;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"AddMessageForm_title__1DO6p\",\"form\":\"AddMessageForm_form__2-Vgn\",\"input\":\"AddMessageForm_input__tZr_6\",\"error\":\"AddMessageForm_error__3OaoW\",\"server_errorContainer\":\"AddMessageForm_server_errorContainer__aUtuH\",\"server_error\":\"AddMessageForm_server_error__2peR7\",\"btn\":\"AddMessageForm_btn__2KuhU\",\"btn_disabled\":\"AddMessageForm_btn_disabled__2prYb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialogs\":\"Dialogs_dialogs__1-R3R\",\"dialogs_list\":\"Dialogs_dialogs_list__259sl\",\"messages\":\"Dialogs_messages__1sBuo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialog\":\"Dialog_dialog__iFTJX\",\"link\":\"Dialog_link__1rmI7\",\"active\":\"Dialog_active__1AEkN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"message_box\":\"Message_message_box__30VK9\",\"text\":\"Message_text__GG0FJ\",\"avatar\":\"Message_avatar__3nTGE\"};","import style from \"./Dialog.module.css\";\r\n\r\nimport { NavLink } from 'react-router-dom';\r\n\r\n\r\nfunction Dialog ({ name, id }) {\r\n  return (\r\n    <li className={style.dialog}>\r\n      <NavLink to={`/dialogs/${id}`} className={style.link} activeClassName={style.active}>{name}\r\n      </NavLink>\r\n    </li>\r\n  )\r\n}\r\n\r\nexport default Dialog;","import style from \"./Message.module.css\";\r\n\r\n\r\nfunction Message ({ text }) {\r\n  return (\r\n    <div className={style.message_box}>\r\n      <img className={style.avatar} src='https://static.mycity.travel/manage/uploads/7/36/112961/1/2500px-fribourgregion-20190704-dscf3505_3000.jpg' alt=''/>\r\n      <p className={style.text}>{text}</p>\r\n    </div>\r\n  )\r\n}\r\n  \r\n\r\nexport default Message;","import React from 'react';\r\n\r\nimport style from \"./Dialogs.module.css\";\r\nimport Dialog from \"./Dialog/Dialog\";\r\nimport Message from \"./Message/Message\";\r\nimport AddMessageForm from '../common/AddMessageForm/AddMessageForm';\r\n\r\n\r\nfunction Dialogs({ dialogsPage, onSendMessage }) {\r\n \r\n  function handleSubmit(values) {\r\n    onSendMessage(values.message);\r\n  }\r\n\r\n  return (\r\n    <div className={style.dialogs}>\r\n      <ul className={style.dialogs_list}>\r\n        {dialogsPage.dialogs.map(d => <Dialog name={d.name} id={d.id} key={d.id}/>)}\r\n      </ul>\r\n\r\n      <div className={style.messages}>\r\n        {dialogsPage.messages.map(m => <Message text={m.text} key={m.id}/>)}\r\n        <AddMessageForm onSubmit={handleSubmit} style={style.form}/>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Dialogs;","import Dialogs from \"./Dialogs\";\r\nimport { sendMessageActionCreator } from \"../../redux/dialogsReducer\";\r\nimport { connect } from 'react-redux';\r\nimport { WithAuthRedirect } from \"../../hoc/WithAuthRedirect\";\r\nimport { compose } from \"redux\";\r\n\r\n\r\nconst  mapStateToProps = (state) => ({ dialogsPage: state.dialogsPage });\r\n\r\nconst  mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    onSendMessage: (text) => {\r\n      dispatch(sendMessageActionCreator(text))\r\n    },\r\n  }\r\n}\r\n\r\n// const AuthRedirectComponent = WithAuthRedirect(Dialogs);\r\n// const DialogsContainer = connect(mapStateToProps, mapDispatchToProps)(AuthRedirectComponent);\r\n\r\n// мы заменили предыдущие вызовы ф-ий, одной ф-ей компоуз\r\nexport default compose(\r\n  connect(mapStateToProps, mapDispatchToProps),\r\n  WithAuthRedirect\r\n)(Dialogs);","import React from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\n\r\n\r\nconst mapStateToPropsForRedirect = (state) => ({ isAuth: state.auth.isAuth,\r\n  id: state.auth.id });\r\n\r\n\r\nexport const WithAuthRedirect = (Component) => {\r\n  class RedirectComponent extends React.Component {\r\n    render(){\r\n      if(!this.props.isAuth) return <Redirect to={'/login'}/>\r\n      return <Component {...this.props} />\r\n    }\r\n  }\r\n\r\n  const ConnectedAuthRedirectComponent = connect(mapStateToPropsForRedirect)(RedirectComponent);\r\n\r\n  return ConnectedAuthRedirectComponent;\r\n}"],"sourceRoot":""}