{"version":3,"sources":["components/Pagination/Pagination.js","components/Pagination/Pagination.module.css","components/UsersList/UsersList.module.css","components/UserCard/UsersCard.module.css","components/UserCard/UserCard.js","components/UsersList/UsersList.js","components/Users/Users.module.css","components/Users/Users.js","components/Users/UsersContainer.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","hoc/WithAuthRedirect.js"],"names":["Pagination","totalCount","pageSize","currentPage","onClick","portionSize","pagesCount","Math","ceil","pages","i","push","React","useState","portionNumber","setPortionNumber","portionCount","leftBorderNumber","rightBorderNumber","useEffect","className","style","paginator","left","arrow","filter","p","map","page","page_active","right","module","exports","UserCard","user","followingInProgress","follow","unfollow","friend","card","avatar_box","to","id","src","photos","small","avatarDefault","alt","avatar","info_box","name","status","followed","disabled","some","button","button_delete","button_add","UsersList","users","list","Users","totalUsersCount","onPageChanged","UsersContainer","pageNum","props","setCurrentPage","getUsers","this","length","isFetching","Preloader","Component","compose","connect","state","usersPage","toggleFollowingProgress","WithAuthRedirect","_slicedToArray","arr","Array","isArray","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","_i","next","done","value","err","unsupportedIterableToArray","TypeError","mapStateToPropsForRedirect","isAuth","auth","RedirectComponent"],"mappings":"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","file":"static/js/7.6547f502.chunk.js","sourcesContent":["import React from 'react';\r\nimport style from './Pagination.module.css';\r\n\r\n\r\nfunction Pagination({ totalCount, pageSize, currentPage, onClick, portionSize = 10}) {\r\n\r\n  const pagesCount = Math.ceil(totalCount / pageSize);\r\n  const pages = [];\r\n  for(let i = 1; i <= pagesCount; i++){\r\n    pages.push(i);\r\n  }\r\n\r\n  const [portionNumber, setPortionNumber] = React.useState(1);\r\n\r\n  const portionCount = Math.ceil(pagesCount / portionSize);\r\n  const leftBorderNumber = (portionNumber - 1) * portionSize + 1;\r\n  const rightBorderNumber = portionNumber * portionSize;\r\n\r\n\r\n  function handleLeftClick() {\r\n    setPortionNumber(portionNumber - 1);\r\n    onClick((portionNumber - 2) * portionSize + 1);\r\n  }\r\n\r\n  function handleRightClick() {\r\n    setPortionNumber(portionNumber + 1);\r\n    onClick(portionNumber * portionSize + 1);\r\n  }\r\n\r\n  React.useEffect(()=> {\r\n    setPortionNumber(Math.ceil(currentPage / portionSize))\r\n  }, [currentPage, portionSize]);\r\n\r\n  \r\n  return (\r\n    <div className={style.paginator}>\r\n      {portionNumber > 1 && (\r\n        <button className={`${style.left} ${style.arrow}`} onClick={handleLeftClick} />\r\n      )}\r\n      {pages\r\n        .filter((p) =>  p >= leftBorderNumber && p <= rightBorderNumber)\r\n        .map((p) => { return (\r\n          <button\r\n            key={p}\r\n            className={`${style.page} ${p === currentPage && style.page_active}`}\r\n            onClick={() => onClick(p)}\r\n          >\r\n            {p}\r\n          </button>\r\n        )}\r\n      )}\r\n      {portionCount > portionNumber && (\r\n        <button className={`${style.right} ${style.arrow}`} onClick={handleRightClick} />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n  \r\nexport default Pagination;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"Pagination_page__3ALm-\",\"page_active\":\"Pagination_page_active__5YgsH\",\"paginator\":\"Pagination_paginator__2lOiO\",\"arrow\":\"Pagination_arrow__2JBNs\",\"left\":\"Pagination_left__3OWz-\",\"right\":\"Pagination_right__itvgQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"UsersList_list__j40dD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"UsersCard_card__i2_cK\",\"avatar_box\":\"UsersCard_avatar_box__1h0zi\",\"avatar\":\"UsersCard_avatar__7Wzzt\",\"info_box\":\"UsersCard_info_box__3oB1Q\",\"name\":\"UsersCard_name__1I9y8\",\"status\":\"UsersCard_status__1J429\",\"button\":\"UsersCard_button__2-_RS\",\"button_add\":\"UsersCard_button_add__2WRNP\",\"button_delete\":\"UsersCard_button_delete__3p_Tz\"};","import style from './UsersCard.module.css';\r\nimport avatarDefault from \"../../images/avatarDefault.svg\";\r\nimport React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\n\r\nfunction UserCard({ user, followingInProgress, follow, unfollow, friend }) {\r\n\r\n  return (\r\n    <div className={style.card}>\r\n      <div className={style.avatar_box}>\r\n        <NavLink to={'/profile/' + user.id}>\r\n            <img src={!user.photos.small ? avatarDefault : user.photos.small} alt='user' className={style.avatar}/>\r\n        </NavLink>\r\n      </div>\r\n      <div className={style.info_box}>\r\n        <p className={style.name}>{user.name}</p>\r\n        {friend && (<p className={style.status}>{user.status}</p>)}\r\n        {user.followed \r\n          ? <button\r\n              disabled={followingInProgress.some(id  => id === user.id)}\r\n              onClick={() => unfollow(user.id)}\r\n              className={`${style.button} ${style.button_delete}`}\r\n            >\r\n              Unfollow\r\n            </button>\r\n          : <button \r\n              disabled={followingInProgress.some(id  => id === user.id)}\r\n              onClick={() => follow(user.id)}\r\n              className={`${style.button} ${style.button_add}`}\r\n            >\r\n              Follow\r\n            </button>\r\n        }\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserCard;","import style from './UsersList.module.css';\r\nimport React from 'react';\r\nimport UserCard from '../UserCard/UserCard';\r\n\r\n\r\nfunction UsersList({\r\n  users,\r\n  followingInProgress,\r\n  unfollow,\r\n  follow,\r\n  friend,\r\n}) {\r\n\r\n  return (\r\n    <div className={style.list}>\r\n      {users.map((user) => {\r\n        return (\r\n          <UserCard\r\n            key={user.id} \r\n            user={user}\r\n            followingInProgress={followingInProgress}\r\n            follow={follow}\r\n            unfollow={unfollow}\r\n            friend={friend}\r\n          />)\r\n        })\r\n      }\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UsersList;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"avatar\":\"Users_avatar__coBMK\"};","import style from './Users.module.css';\r\nimport React from 'react';\r\nimport Pagination from '../Pagination/Pagination';\r\nimport UsersList from '../UsersList/UsersList';\r\n\r\n\r\nfunction Users({\r\n  totalUsersCount,\r\n  pageSize,\r\n  currentPage,\r\n  onPageChanged,\r\n  users,\r\n  followingInProgress,\r\n  unfollow,\r\n  follow\r\n}) {\r\n\r\n  return (\r\n    <div>\r\n      <Pagination\r\n        totalCount={totalUsersCount}\r\n        pageSize={pageSize}\r\n        currentPage={currentPage}\r\n        onClick={onPageChanged}\r\n      />\r\n      <UsersList\r\n        users={users}\r\n        followingInProgress={followingInProgress}\r\n        follow={follow}\r\n        unfollow={unfollow}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Users;","import { connect } from \"react-redux\";\r\nimport { follow, unfollow, setCurrentPage, toggleFollowingProgress, getUsers } from \"../../redux/userReducer\";\r\nimport React from 'react';\r\nimport Users from \"./Users\";\r\nimport Preloader from '../common/Preloader/Preloader';\r\nimport { WithAuthRedirect } from \"../../hoc/WithAuthRedirect\";\r\nimport { compose } from \"redux\";\r\n\r\n\r\nclass UsersContainer extends React.Component {\r\n\r\n  componentDidMount() {\r\n    if(this.props.users.length === 0){\r\n      this.props.getUsers(this.props.currentPage, this.props.pageSize);\r\n    }\r\n  };\r\n    \r\n  onPageChanged = (pageNum) => {\r\n    this.props.setCurrentPage(pageNum);\r\n    this.props.getUsers(pageNum, this.props.pageSize);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        {this.props.isFetching ? <Preloader /> : <Users {...this.props} onPageChanged={this.onPageChanged} />}\r\n      </>\r\n    );\r\n  }\r\n};\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    users: state.usersPage.users,\r\n    pageSize: state.usersPage.pageSize,\r\n    totalUsersCount: state.usersPage.totalUsersCount,\r\n    currentPage: state.usersPage.currentPage,\r\n    isFetching: state.usersPage.isFetching,\r\n    followingInProgress: state.usersPage.followingInProgress,\r\n  }\r\n}\r\n\r\n\r\nexport default compose(\r\n  connect(mapStateToProps, {\r\n    follow,\r\n    unfollow,\r\n    setCurrentPage,\r\n    toggleFollowingProgress,\r\n    getUsers,\r\n  }),\r\n  WithAuthRedirect\r\n)(UsersContainer);\r\n\r\n\r\n\r\n//теперь передаем вместо функции mapDispatchToProps передаем объект,\r\n//ф-ия connect сама возьмет этот объект и сгененирурет коллбэки которые мы реньше прописывали в mapDispatchToProps\r\n\r\n// const AuthRedirectComponent = WithAuthRedirect(UsersContainer);\r\n\r\n\r\n// export default  connect(mapStateToProps, {\r\n//   follow,\r\n//   unfollow,\r\n//   setCurrentPage,\r\n//   toggleFollowingProgress,\r\n//   getUsers,\r\n// })(AuthRedirectComponent);\r\n\r\n\r\n// const mapDispatchToProps = (dispatch) => {\r\n//   return {\r\n//     follow: (userId) => {\r\n//       dispatch(followAC(userId));\r\n//     },\r\n//     unfollow: (userId) => {\r\n//       dispatch(unfollowAC(userId));\r\n//     },\r\n//     setUsers: (users) => {\r\n//       dispatch(setUsersAC(users));\r\n//     },\r\n//     setCurrentPage: (pageNum) => {\r\n//       dispatch(setCurrentPageAC(pageNum));\r\n//     },\r\n//     setTotalUsersCount: (totalCount) => {\r\n//       dispatch(setTotalUsersCountAC(totalCount));\r\n//     },\r\n//     toggleIsFetching: (isFetching) => {\r\n//       dispatch(toggleIsFetchingAC(isFetching));\r\n//     }\r\n//   }\r\n// }","import arrayWithHoles from \"@babel/runtime/helpers/esm/arrayWithHoles\";\nimport iterableToArrayLimit from \"@babel/runtime/helpers/esm/iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableRest from \"@babel/runtime/helpers/esm/nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import React from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\n\r\n\r\nconst mapStateToPropsForRedirect = (state) => ({ isAuth: state.auth.isAuth,\r\n  id: state.auth.id });\r\n\r\n\r\nexport const WithAuthRedirect = (Component) => {\r\n  class RedirectComponent extends React.Component {\r\n    render(){\r\n      if(!this.props.isAuth) return <Redirect to={'/login'}/>\r\n      return <Component {...this.props} />\r\n    }\r\n  }\r\n\r\n  const ConnectedAuthRedirectComponent = connect(mapStateToPropsForRedirect)(RedirectComponent);\r\n\r\n  return ConnectedAuthRedirectComponent;\r\n}"],"sourceRoot":""}