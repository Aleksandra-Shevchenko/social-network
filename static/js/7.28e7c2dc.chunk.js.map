{"version":3,"sources":["components/Pagination/Pagination.js","components/Pagination/Pagination.module.css","components/UserCard/UserCard.js","components/UserCard/UsersCard.module.css","components/Users/Users.module.css","components/Users/Users.js","components/Users/UsersContainer.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","hoc/WithAuthRedirect.js"],"names":["Pagination","totalCount","pageSize","currentPage","onClick","portionSize","pagesCount","Math","ceil","pages","i","push","React","useState","portionNumber","setPortionNumber","portionCount","leftBorderNumber","rightBorderNumber","useEffect","className","style","paginator","left","arrow","filter","p","map","page","page_active","right","module","exports","UserCard","user","followingInProgress","follow","unfollow","to","id","src","photos","small","avatarDefault","alt","avatar","followed","disabled","some","name","status","Users","totalUsersCount","onPageChanged","users","UsersContainer","pageNum","props","setCurrentPage","getUsers","this","length","isFetching","Preloader","Component","compose","connect","state","usersPage","toggleFollowingProgress","WithAuthRedirect","_slicedToArray","arr","Array","isArray","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","_i","next","done","value","err","unsupportedIterableToArray","TypeError","mapStateToPropsForRedirect","isAuth","auth","RedirectComponent"],"mappings":"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","file":"static/js/7.28e7c2dc.chunk.js","sourcesContent":["import React from 'react';\r\nimport style from './Pagination.module.css';\r\n\r\n\r\nfunction Pagination({ totalCount, pageSize, currentPage, onClick, portionSize = 10}) {\r\n\r\n  const pagesCount = Math.ceil(totalCount / pageSize);\r\n  const pages = [];\r\n  for(let i = 1; i <= pagesCount; i++){\r\n    pages.push(i);\r\n  }\r\n\r\n  const [portionNumber, setPortionNumber] = React.useState(1);\r\n\r\n  const portionCount = Math.ceil(pagesCount / portionSize);\r\n  const leftBorderNumber = (portionNumber - 1) * portionSize + 1;\r\n  const rightBorderNumber = portionNumber * portionSize;\r\n\r\n\r\n  function handleLeftClick() {\r\n    setPortionNumber(portionNumber - 1);\r\n    onClick((portionNumber - 2) * portionSize + 1);\r\n  }\r\n\r\n  function handleRightClick() {\r\n    setPortionNumber(portionNumber + 1);\r\n    onClick(portionNumber * portionSize + 1);\r\n  }\r\n\r\n  React.useEffect(()=> {\r\n    setPortionNumber(Math.ceil(currentPage / portionSize))\r\n  }, [currentPage, portionSize]);\r\n\r\n  \r\n  return (\r\n    <div className={style.paginator}>\r\n      {portionNumber > 1 && (\r\n        <button className={`${style.left} ${style.arrow}`} onClick={handleLeftClick} />\r\n      )}\r\n      {pages\r\n        .filter((p) =>  p >= leftBorderNumber && p <= rightBorderNumber)\r\n        .map((p) => { return (\r\n          <button\r\n            key={p}\r\n            className={`${style.page} ${p === currentPage && style.page_active}`}\r\n            onClick={() => onClick(p)}\r\n          >\r\n            {p}\r\n          </button>\r\n        )}\r\n      )}\r\n      {portionCount > portionNumber && (\r\n        <button className={`${style.right} ${style.arrow}`} onClick={handleRightClick} />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n  \r\nexport default Pagination;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"Pagination_page__3ALm-\",\"page_active\":\"Pagination_page_active__5YgsH\",\"paginator\":\"Pagination_paginator__2lOiO\",\"arrow\":\"Pagination_arrow__2JBNs\",\"left\":\"Pagination_left__3OWz-\",\"right\":\"Pagination_right__itvgQ\"};","import style from './UsersCard.module.css';\r\nimport avatarDefault from \"../../images/avatarDefault.svg\";\r\nimport React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\n\r\nfunction UserCard({ user, followingInProgress, follow, unfollow }) {\r\n\r\n  return (\r\n    <>\r\n      <div>\r\n        <NavLink to={'/profile/' + user.id}>\r\n          <img src={!user.photos.small ? avatarDefault : user.photos.small} alt='' className={style.avatar}/>\r\n        </NavLink>\r\n\r\n        {user.followed \r\n          ? <button\r\n              disabled={followingInProgress.some(id  => id === user.id)}\r\n              onClick={() => unfollow(user.id)}\r\n            >\r\n              Unfollow\r\n            </button>\r\n          : <button \r\n              disabled={followingInProgress.some(id  => id === user.id)}\r\n              onClick={() => follow(user.id)}\r\n            >\r\n              Follow\r\n            </button>}\r\n      </div>\r\n      <div>\r\n        <p>{user.name}</p>\r\n        <p>{user.status}</p>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default UserCard;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"avatar\":\"UsersCard_avatar__7Wzzt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"avatar\":\"Users_avatar__coBMK\"};","import style from './Users.module.css';\r\nimport React from 'react';\r\nimport Pagination from '../Pagination/Pagination';\r\nimport UserCard from '../UserCard/UserCard';\r\n\r\n\r\nfunction Users({\r\n  totalUsersCount,\r\n  pageSize,\r\n  currentPage,\r\n  onPageChanged,\r\n  users,\r\n  followingInProgress,\r\n  unfollow,\r\n  follow\r\n}) {\r\n\r\n  return (\r\n    <div>\r\n      <Pagination\r\n        totalCount={totalUsersCount}\r\n        pageSize={pageSize}\r\n        currentPage={currentPage}\r\n        onClick={onPageChanged}\r\n      />\r\n      {users.map((user) => {\r\n        return (\r\n          <UserCard\r\n            key={user.id} \r\n            user={user}\r\n            followingInProgress={followingInProgress}\r\n            follow={follow}\r\n            unfollow={unfollow}\r\n          />)\r\n        })\r\n      }\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Users;","import { connect } from \"react-redux\";\r\nimport { follow, unfollow, setCurrentPage, toggleFollowingProgress, getUsers } from \"../../redux/userReducer\";\r\nimport React from 'react';\r\nimport Users from \"./Users\";\r\nimport Preloader from '../common/Preloader/Preloader';\r\nimport { WithAuthRedirect } from \"../../hoc/WithAuthRedirect\";\r\nimport { compose } from \"redux\";\r\n\r\n\r\nclass UsersContainer extends React.Component {\r\n\r\n  componentDidMount() {\r\n    if(this.props.users.length === 0){\r\n      this.props.getUsers(this.props.currentPage, this.props.pageSize);\r\n    }\r\n  };\r\n    \r\n  onPageChanged = (pageNum) => {\r\n    this.props.setCurrentPage(pageNum);\r\n    this.props.getUsers(pageNum, this.props.pageSize);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        {this.props.isFetching ? <Preloader /> : <Users {...this.props} onPageChanged={this.onPageChanged} />}\r\n      </>\r\n    );\r\n  }\r\n};\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    users: state.usersPage.users,\r\n    pageSize: state.usersPage.pageSize,\r\n    totalUsersCount: state.usersPage.totalUsersCount,\r\n    currentPage: state.usersPage.currentPage,\r\n    isFetching: state.usersPage.isFetching,\r\n    followingInProgress: state.usersPage.followingInProgress,\r\n  }\r\n}\r\n\r\n\r\nexport default compose(\r\n  connect(mapStateToProps, {\r\n    follow,\r\n    unfollow,\r\n    setCurrentPage,\r\n    toggleFollowingProgress,\r\n    getUsers,\r\n  }),\r\n  WithAuthRedirect\r\n)(UsersContainer);\r\n\r\n\r\n\r\n//теперь передаем вместо функции mapDispatchToProps передаем объект,\r\n//ф-ия connect сама возьмет этот объект и сгененирурет коллбэки которые мы реньше прописывали в mapDispatchToProps\r\n\r\n// const AuthRedirectComponent = WithAuthRedirect(UsersContainer);\r\n\r\n\r\n// export default  connect(mapStateToProps, {\r\n//   follow,\r\n//   unfollow,\r\n//   setCurrentPage,\r\n//   toggleFollowingProgress,\r\n//   getUsers,\r\n// })(AuthRedirectComponent);\r\n\r\n\r\n// const mapDispatchToProps = (dispatch) => {\r\n//   return {\r\n//     follow: (userId) => {\r\n//       dispatch(followAC(userId));\r\n//     },\r\n//     unfollow: (userId) => {\r\n//       dispatch(unfollowAC(userId));\r\n//     },\r\n//     setUsers: (users) => {\r\n//       dispatch(setUsersAC(users));\r\n//     },\r\n//     setCurrentPage: (pageNum) => {\r\n//       dispatch(setCurrentPageAC(pageNum));\r\n//     },\r\n//     setTotalUsersCount: (totalCount) => {\r\n//       dispatch(setTotalUsersCountAC(totalCount));\r\n//     },\r\n//     toggleIsFetching: (isFetching) => {\r\n//       dispatch(toggleIsFetchingAC(isFetching));\r\n//     }\r\n//   }\r\n// }","import arrayWithHoles from \"@babel/runtime/helpers/esm/arrayWithHoles\";\nimport iterableToArrayLimit from \"@babel/runtime/helpers/esm/iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableRest from \"@babel/runtime/helpers/esm/nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import React from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\n\r\n\r\nconst mapStateToPropsForRedirect = (state) => ({ isAuth: state.auth.isAuth,\r\n  id: state.auth.id });\r\n\r\n\r\nexport const WithAuthRedirect = (Component) => {\r\n  class RedirectComponent extends React.Component {\r\n    render(){\r\n      if(!this.props.isAuth) return <Redirect to={'/login'}/>\r\n      return <Component {...this.props} />\r\n    }\r\n  }\r\n\r\n  const ConnectedAuthRedirectComponent = connect(mapStateToPropsForRedirect)(RedirectComponent);\r\n\r\n  return ConnectedAuthRedirectComponent;\r\n}"],"sourceRoot":""}