(this["webpackJsonpsocial-network"]=this["webpackJsonpsocial-network"]||[]).push([[5],{109:function(e,t,a){"use strict";var o=a(108),s=a(111),r=a.n(s),n=a(0);t.a=function(e){var t=e.error,a=e.onSubmit;return Object(n.jsx)(o.d,{initialValues:{message:""},onSubmit:function(e,t){t.setSubmitting;a(e)},children:function(e){e.isSubmitting;var a=e.errors,s=e.touched,i=e.isValid,c=e.dirty;return Object(n.jsxs)(o.c,{className:r.a.form,children:[Object(n.jsx)("h2",{className:r.a.title,children:"Create post"}),Object(n.jsx)(o.b,{as:"textarea",name:"message",id:"message",placeholder:"Enter your post",className:"\n            ".concat(r.a.input,"\n            ").concat(a.fullName&&s.fullName?r.a.input_error:null)}),Object(n.jsx)(o.a,{name:"message",component:"span",className:r.a.error}),Object(n.jsx)("button",{type:"submit",className:"".concat(r.a.btn," ").concat(c&&i?"":r.a.btn_disabled),disabled:!(c&&i),children:"Publish"}),t?Object(n.jsxs)("div",{className:r.a.server_errorContainer,children:[Object(n.jsx)("p",{className:r.a.server_error,children:"Something wrong!"}),Object(n.jsx)("p",{className:r.a.server_error,children:t})]}):null]})}})}},111:function(e,t,a){e.exports={title:"AddMessageForm_title__1DO6p",form:"AddMessageForm_form__2-Vgn",input:"AddMessageForm_input__tZr_6",error:"AddMessageForm_error__3OaoW",server_errorContainer:"AddMessageForm_server_errorContainer__aUtuH",server_error:"AddMessageForm_server_error__2peR7",btn:"AddMessageForm_btn__2KuhU",btn_disabled:"AddMessageForm_btn_disabled__2prYb"}},116:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return n}));var o=a(151),s="This address is invalid. The field must contain URL",r=o.a().shape({email:o.b().email().required("Email is required"),password:o.b().required("Password is required").min(4,"Password is too short - should be 4 chars min"),captcha:o.b()}),n=o.a().shape({fullName:o.b().required("Name is required").min(2,"Name is too short - should be 2 chars min").max(40,"Name is too long - should be 40 chars max"),aboutMe:o.b(),lookingForAJobDescription:o.b(),contacts:o.a().shape({facebook:o.b().url(s),github:o.b().url(s),instagram:o.b().url(s),mainLink:o.b().url(s),twitter:o.b().url(s),vk:o.b().url(s),website:o.b().url(s),youtube:o.b().url(s)})})},159:function(e,t,a){e.exports={content:"Profile_content__1KZ02"}},160:function(e,t,a){e.exports={myPosts_box:"MyPosts_myPosts_box__1vWVt",title:"MyPosts_title__3I_rh",form:"MyPosts_form__qT0-R"}},161:function(e,t,a){e.exports={post:"Post_post__3rY-N",post_box:"Post_post_box__1fr8O",avatar:"Post_avatar__36H_Y",author:"Post_author__3NM-r",text:"Post_text__3l8k_"}},162:function(e,t,a){e.exports={profile_info:"ProfileInfo_profile_info__2mOSo",photo_box:"ProfileInfo_photo_box__hHTGL",change_photo_box:"ProfileInfo_change_photo_box__3dv4R",label:"ProfileInfo_label__224FY",input_file_button_text:"ProfileInfo_input_file_button_text__2Ou00",change_photo_input:"ProfileInfo_change_photo_input__3CyeY",user_photo:"ProfileInfo_user_photo__2q-zf",user_photoDefault:"ProfileInfo_user_photoDefault__3Yiy2",description_box:"ProfileInfo_description_box__22GFZ",main_info:"ProfileInfo_main_info__3Tn_J",header:"ProfileInfo_header__3B74Z",liner:"ProfileInfo_liner__MKxkr",edit:"ProfileInfo_edit__MnHiT",caption:"ProfileInfo_caption__1Orjr",info:"ProfileInfo_info__2fHGV",contacts:"ProfileInfo_contacts__2AZtE",contacts_box:"ProfileInfo_contacts_box__3T7if",icon_box:"ProfileInfo_icon_box__oUNUo",icon_link:"ProfileInfo_icon_link__3imz7",icon:"ProfileInfo_icon__tJSm8",icon_empty:"ProfileInfo_icon_empty__1cA3w",headline:"ProfileInfo_headline__Ng3FZ",text:"ProfileInfo_text__33OWi",photos:"ProfileInfo_photos__3NjGQ",photo:"ProfileInfo_photo___q1pS",photo_default:"ProfileInfo_photo_default__29Y-k"}},163:function(e,t,a){e.exports={status_box:"ProfileStatus_status_box__1-2Ub",status:"ProfileStatus_status__3Xo_d",hover:"ProfileStatus_hover__2JHX1",no_status:"ProfileStatus_no_status__36uPz",status_input:"ProfileStatus_status_input__A8FtX"}},164:function(e,t,a){e.exports={profile_form_box:"ProfileDataForm_profile_form_box__3d7zc",container:"ProfileDataForm_container__26FEU",close_btn:"ProfileDataForm_close_btn__AdW2x",close:"ProfileDataForm_close__37u10",title:"ProfileDataForm_title__2ekHx",form:"ProfileDataForm_form__3bznC",form_row:"ProfileDataForm_form_row____tdv",form_checkbox:"ProfileDataForm_form_checkbox__8qdSy",label:"ProfileDataForm_label__3w_sQ",input:"ProfileDataForm_input__2OUoy",input_textarea:"ProfileDataForm_input_textarea__27wfK",input_error:"ProfileDataForm_input_error__2BzVY",error:"ProfileDataForm_error__2PkQx",server_errorContainer:"ProfileDataForm_server_errorContainer__2PyIb",server_error:"ProfileDataForm_server_error__yh_Ln",btn:"ProfileDataForm_btn__2bYdc",btn_disabled:"ProfileDataForm_btn_disabled__3Sb7I"}},271:function(e,t,a){"use strict";a.r(t);var o=a(2),s=a(26),r=a(27),n=a(28),i=a(29),c=a(20),l=a(21),_=a(1),u=a.n(_),b=a(95),d=a(159),f=a.n(d),m=a(160),p=a.n(m),h=a(161),j=a.n(h),x=a(40),O=a(0);var v=function(e){var t=e.message,a=e.profile;return Object(O.jsxs)("div",{className:j.a.post,children:[Object(O.jsxs)("div",{className:j.a.post_box,children:[Object(O.jsx)("img",{className:j.a.avatar,src:a.photos.small?a.photos.small:x.a,alt:""}),Object(O.jsx)("p",{className:j.a.author,children:a.fullName})]}),Object(O.jsx)("p",{className:j.a.text,children:t})]})},g=a(109);var N=function(e){var t=e.addPost,a=e.profile,o=e.posts;return Object(O.jsxs)("div",{className:p.a.myPosts_box,children:[Object(O.jsx)(g.a,{onSubmit:function(e){t(e.message)},style:p.a.form}),Object(O.jsxs)("div",{className:"PostList",children:[Object(O.jsx)("h2",{className:p.a.title,children:"My posts"}),o.map((function(e){return Object(O.jsx)(v,{message:e.text,profile:a},e.id)}))]})]})},P=Object(c.b)((function(e){return{posts:e.profilePage.posts,newPostTex:e.profilePage.newPostTex}}),(function(e){return{addPost:function(t){e(Object(l.a)(t))}}}))(N),k=a(162),F=a.n(k),y=a(19),S=a(163),A=a.n(S);var M=function(e){var t=u.a.useState(!1),a=Object(b.a)(t,2),o=a[0],s=a[1],r=u.a.useState(e.status),n=Object(b.a)(r,2),i=n[0],c=n[1];return u.a.useEffect((function(){c(e.status)}),[e.status]),Object(O.jsx)("div",{className:A.a.status_box,children:o?Object(O.jsx)("textarea",{autoFocus:!0,onBlur:function(){s(!1),e.status!==i&&e.updateStatus(i)},value:i,onChange:function(e){c(e.currentTarget.value)},className:A.a.status_input}):Object(O.jsx)("p",{onClick:function(){e.noChanges?s(!1):s(!0)},className:"".concat(A.a.status," ").concat(!e.noChanges&&A.a.hover," ").concat(!e.status&&A.a.no_status),children:e.status||"\u279c Set status"})})},I=a(164),w=a.n(I),D=a(116),C=a(108);var J=function(e){var t=e.profile,a=e.error,s=e.saveProfile,r=e.idAuthUser,n=e.onEditMode,i=Object.keys(t.contacts).reduce((function(e,a){return e[a]=t.contacts[a]?t.contacts[a]:"",e}),{});return Object(O.jsx)("div",{className:w.a.profile_form_box,children:Object(O.jsx)(C.d,{initialValues:{fullName:t.fullName,aboutMe:t.aboutMe?t.aboutMe:"",lookingForAJobDescription:t.lookingForAJobDescription?t.lookingForAJobDescription:"",lookingForAJob:t.lookingForAJob,contacts:Object(o.a)({},i)},validationSchema:D.b,onSubmit:function(e,t){var a=t.setSubmitting;s(e,r).then((function(){n(),a(!1)}))},children:function(e){var o=e.errors,s=e.touched,r=e.isValid,i=e.dirty,c=e.isSubmitting;return Object(O.jsxs)("div",{className:w.a.container,children:[Object(O.jsx)("button",{onClick:n,className:w.a.close_btn}),Object(O.jsxs)(C.c,{className:w.a.form,children:[Object(O.jsx)("h2",{className:w.a.title,children:"Basic information"}),Object(O.jsxs)("div",{className:w.a.form_row,children:[Object(O.jsx)("label",{htmlFor:"fullName",className:w.a.label,children:"Full name"}),Object(O.jsx)(C.b,{type:"text",name:"fullName",id:"fullName",className:"\n                    ".concat(w.a.input,"\n                    ").concat(o.fullName&&s.fullName?w.a.input_error:null,"\n                  ")}),Object(O.jsx)(C.a,{name:"fullName",component:"span",className:w.a.error})]}),Object(O.jsxs)("div",{className:w.a.form_row,children:[Object(O.jsx)("label",{htmlFor:"aboutMe",className:w.a.label,children:"About me"}),Object(O.jsx)(C.b,{as:"textarea",type:"text",name:"aboutMe",id:"aboutMe",className:"\n                    ".concat(w.a.input,"\n                    ").concat(w.a.input_textarea,"\n                    ").concat(o.aboutMe&&s.aboutMe?w.a.input_error:null,"\n                  ")}),Object(O.jsx)(C.a,{name:"aboutMe",component:"span",className:w.a.error})]}),Object(O.jsxs)("div",{className:w.a.form_row,children:[Object(O.jsx)("label",{htmlFor:"lookingForAJobDescription",className:w.a.label,children:"Professional skills"}),Object(O.jsx)(C.b,{as:"textarea",type:"text",name:"lookingForAJobDescription",id:"lookingForAJobDescription",className:"\n                    ".concat(w.a.input,"\n                    ").concat(w.a.input_textarea,"\n                    ").concat(o.lookingForAJobDescription&&s.lookingForAJobDescription?w.a.input_error:null,"\n                  ")}),Object(O.jsx)(C.a,{name:"lookingForAJobDescription",component:"span",className:w.a.error})]}),Object(O.jsx)("h2",{className:w.a.title,children:"Career"}),Object(O.jsxs)("div",{className:w.a.form_checkbox,children:[Object(O.jsx)("label",{htmlFor:"lookingForAJob",className:w.a.label,children:"Looking for a job"}),Object(O.jsx)(C.b,{type:"checkbox",name:"lookingForAJob",id:"lookingForAJob",className:w.a.checkbox})]}),Object(O.jsx)("h2",{className:w.a.title,children:"Contacts"}),Object(O.jsx)("div",{children:Object.keys(t.contacts).map((function(e){return Object(O.jsxs)("div",{className:w.a.form_row,children:[Object(O.jsx)("label",{htmlFor:"contacts."+e,className:w.a.label,children:e}),Object(O.jsx)(C.b,{type:"text",name:"contacts."+e,id:"contacts."+e,className:"\n                        ".concat(w.a.input,"\n                        ").concat(o["contacts."+e]&&s["contacts."+e]?w.a.input_error:null,"\n                      ")}),Object(O.jsx)(C.a,{name:"contacts."+e,component:"span",className:w.a.error})]},e)}))}),Object(O.jsx)("button",{type:"submit",className:"".concat(w.a.btn," ").concat(i&&r&&!c?"":w.a.btn_disabled),disabled:c||!(i&&r),children:"Save"}),a?Object(O.jsxs)("div",{className:w.a.server_errorContainer,children:[Object(O.jsx)("p",{className:w.a.server_error,children:"Something wrong!"}),Object(O.jsx)("p",{className:w.a.server_error,children:a})]}):null]}),Object(O.jsx)("button",{onClick:n,className:w.a.close,children:"Don't save changes. Exit edit mode."})]})}})})},E=(a.p,a.p+"static/media/facebook.8a845d65.svg"),U=a.p+"static/media/instagram.76d3e39f.svg",q=a.p+"static/media/youtube.42828603.svg",T=a.p+"static/media/github.2d5e16a0.svg",L=a.p+"static/media/mainLink.6f35dd4e.svg",Y=a.p+"static/media/twitter.7e3391c2.svg",V={facebook:E,instagram:U,vk:a.p+"static/media/vk.82ad7afb.svg",youtube:q,github:T,mainLink:L,twitter:Y,website:a.p+"static/media/website.208d2a60.svg"};var H=function(e){var t=e.title,a=e.value;return Object(O.jsx)("div",{className:F.a.icon_box,children:a?Object(O.jsx)("a",{href:a,target:"_blank",rel:"noreferrer",className:F.a.icon_link,children:Object(O.jsx)("img",{src:V[t],alt:"social netwok",className:F.a.icon})}):Object(O.jsx)("img",{src:V[t],alt:"social netwok",className:F.a.icon_empty})})},z=function(e){var t=e.profile,a=e.isOwner,o=e.onChangePhoto,s=e.onEditMode,r=e.status,n=e.updateStatus,i=e.idAuthUser,c=e.isSaving,l=u.a.useRef();return Object(O.jsxs)("div",{className:F.a.profile_info,children:[Object(O.jsxs)("div",{className:F.a.photo_box,children:[c?Object(O.jsx)(y.a,{}):Object(O.jsx)("img",{className:"".concat(F.a.user_photo," ").concat(!t.photos.large&&F.a.user_photoDefault),src:t.photos.large||x.a,alt:"#"}),a&&Object(O.jsxs)("div",{className:F.a.change_photo_box,children:[Object(O.jsxs)("label",{htmlFor:"photo_file",className:F.a.label,children:[Object(O.jsx)("input",{type:"file",onChange:o,className:F.a.change_photo_input,id:"photo_file",ref:l}),!c&&Object(O.jsx)("button",{className:F.a.input_file_button_text,onClick:function(){return l.current.click()},disabled:c})]}),Object(O.jsx)("input",{type:"file",onChange:o,className:F.a.change_photo_input,id:"photo_file"})]})]}),Object(O.jsxs)("div",{className:F.a.description_box,children:[Object(O.jsxs)("div",{className:F.a.main_info,children:[Object(O.jsx)("h2",{className:F.a.header,children:t.fullName}),Object(O.jsx)(M,{status:r,updateStatus:n,noChanges:t.userId!==i&&!0})]}),a?Object(O.jsx)("button",{onClick:s,className:F.a.edit,children:"Edit"}):Object(O.jsx)("div",{className:F.a.liner}),Object(O.jsxs)("div",{className:F.a.info,children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("h3",{className:F.a.headline,children:"About me"}),Object(O.jsx)("p",{className:F.a.text,children:t.aboutMe||"no description"})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("h3",{className:F.a.headline,children:"Professional skills"}),Object(O.jsx)("p",{className:F.a.text,children:t.lookingForAJobDescription||"no description"})]}),Object(O.jsx)("p",{className:F.a.text,children:Object(O.jsx)("span",{className:F.a.headline,children:t.lookingForAJob?"Looking for a job":"Employed"})}),Object(O.jsxs)("div",{className:F.a.contacts,children:[Object(O.jsx)("h3",{className:F.a.headline,children:"Contacts"}),Object(O.jsx)("div",{className:F.a.contacts_box,children:Object.keys(t.contacts).map((function(e){return Object(O.jsx)(H,{title:e,value:t.contacts[e]},e)}))})]})]})]})]})},Z=function(e){var t=e.profile,a=e.status,o=e.updateStatus,s=e.idAuthUser,r=e.isOwner,n=e.savePhoto,i=e.saveProfile,c=e.error,l=e.handleExitEditMode,_=e.editMode,u=e.handleActiveEditMode,b=e.isSaving;return t?Object(O.jsx)(O.Fragment,{children:_?Object(O.jsx)(J,{profile:t,isOwner:r,saveProfile:i,idAuthUser:s,onEditMode:l,error:c}):Object(O.jsx)(z,{profile:t,isOwner:r,onEditMode:u,onChangePhoto:function(e){e.target.files.length&&n(e.target.files[0])},status:a,updateStatus:o,idAuthUser:s,isSaving:b})}):Object(O.jsx)(y.a,{})};var R=function(e){var t=e.profile,a=e.status,o=e.updateStatus,s=e.id,r=e.isOwner,n=e.savePhoto,i=e.saveProfile,c=e.error,l=e.isSaving,_=u.a.useState(!1),d=Object(b.a)(_,2),m=d[0],p=d[1];return Object(O.jsxs)("div",{className:f.a.content,children:[Object(O.jsx)(Z,{profile:t,status:a,updateStatus:o,idAuthUser:s,isOwner:r,savePhoto:n,saveProfile:i,error:c,handleExitEditMode:function(){p(!1)},handleActiveEditMode:function(){p(!0)},editMode:m,isSaving:l}),r&&!m&&Object(O.jsx)(P,{profile:t})]})},B=a(3),G=a(96),K=a(18),W=function(e){Object(n.a)(a,e);var t=Object(i.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e||(e=this.props.id),Promise.all([this.props.getPersonalInfo(e),this.props.getStatus(e)])}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t,a){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return Object(O.jsx)(O.Fragment,{children:this.props.isFetching?Object(O.jsx)(y.a,{}):Object(O.jsx)(R,Object(o.a)(Object(o.a)({},this.props),{},{isOwner:!this.props.match.params.userId}))})}}]),a}(u.a.Component);t.default=Object(K.d)(Object(c.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,error:e.profilePage.error,isFetching:e.profilePage.isFetching,isSaving:e.profilePage.isSaving}}),{getPersonalInfo:l.c,getStatus:l.d,updateStatus:l.g,savePhoto:l.e,saveProfile:l.f}),B.f,G.a)(W)},96:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var o=a(2),s=a(26),r=a(27),n=a(28),i=a(29),c=a(1),l=a.n(c),_=a(3),u=a(20),b=a(0),d=function(e){return{isAuth:e.auth.isAuth,id:e.auth.id}},f=function(e){var t=function(t){Object(n.a)(c,t);var a=Object(i.a)(c);function c(){return Object(s.a)(this,c),a.apply(this,arguments)}return Object(r.a)(c,[{key:"render",value:function(){return this.props.isAuth?Object(b.jsx)(e,Object(o.a)({},this.props)):Object(b.jsx)(_.a,{to:"/login"})}}]),c}(l.a.Component);return Object(u.b)(d)(t)}}}]);
//# sourceMappingURL=5.3fd4dac7.chunk.js.map